<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="qnaBoard">

	<select id="selectBoardList"  resultType="qnaBoard">
		SELECT * FROM QNA_BOARD
	</select>
	
<!--  	<resultMap id="qnaBoard"
			type="com.spring.itjobgo.qna.model.vo.QnaBoard">
			<result column="QNA_SEQ" property="qnaSeq" />
			<result column="QNA_CATEGORY" property="qnaCategory" />
			<result column="QNA_TITLE" property="qnaTitle" />
			<result column="QNA_WRITER" property="qnaWriter" />
			<result column="QNA_CONTENT" property="qnaContent" />
			<result column="QNA_ANSWER_YN" property="qnaAnswerYn" />
			<result column="QNA_DATE" property="qnaDate" />
			<result column="BOARD_ORIGINAL_FILEPATH" property="boardOriginalFilepath" />
			<result column="BOARD_RENAME_FILEPATH" property="boardRenameFilepath" />
			<result column="MEMBER_NUM" property="memberNum" />
	</resultMap>	 -->
	
	
	<!-- qna게시판 글 작성  -->
	<insert id="insertQna" parameterType="qnaBoard">
	INSERT INTO QNA_BOARD VALUES (
										SEQ_QNA_NO.NEXTVAL,
										#{qnaCategory},
										#{qnaTitle},
										#{qnaWriter},
										#{qnaContent},
										#{qnaAnswerYn},
										DEFAULT,
										1,
										#{boardId}		
										)
	</insert>
	
	<!-- 첨부파일 등록  -->
	<insert id="insertAttachment" parameterType="qna_attachment">
		INSERT INTO QB_ATTACHMENT VALUES(
											SEQ_QB_ATTACHMENT_NO.NEXTVAL,
											#{qnaSeq},
											#{originalfilename},
											#{renamedfilename},
											DEFAULT,
											DEFAULT
											)
											
			<selectKey keyProperty="qnaSeq" resultType="_int" order="BEFORE">
	 		SELECT SEQ_QNA_NO.CURRVAL FROM DUAL
	  		</selectKey>		 
			<!-- 현재 boardSq의 시퀀스 번호를 알고 싶을때 curraval from dual을 이용해
			selectKey를 설정한다 -->
	</insert>
	
	
	<!-- qna게시판 글 상세보기 -->
	<select id="selectQnaBoardOne" parameterType="_int" resultType="qnaBoard">
			SELECT * FROM QNA_BOARD WHERE QNA_SEQ=#{qnaSeq}
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>